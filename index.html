<!-- LEGISLA√á√ÉO INTERNA TJSP 2025 -->
<section class="content-screen hidden" id="legislacao">
  <button class="back-btn" id="backFromLegis">Voltar ao in√≠cio</button>
  <div class="manual-card main legis-hero">
    <span class="legis-hero-title">
      Para voc√™ <b>gabaritar a Legisla√ß√£o Interna do TJSP 2025</b>
    </span>
    <span class="legis-hero-sub">
      Esquemas visuais, tabelas e quest√µes in√©ditas para voc√™ <b>dominar a VUNESP</b>.
    </span>
  </div>
  <div class="legis-card">
    <div class="legis-title"><b>Resolu√ß√£o TJSP n¬∫ 850/2021</b> <span style="font-size:0.95em; font-weight:500; color:#855ae1;">(teletrabalho)</span></div>
    <button class="amostra-btn">Ver amostra</button>
  </div>
  <div class="legis-card">
    <div class="legis-title"><b>Resolu√ß√£o TJSP n¬∫ 963/2025</b> <span style="font-size:0.95em; font-weight:500; color:#855ae1;">(governan√ßa eproc)</span></div>
    <button class="amostra-btn">Ver amostra</button>
  </div>
  <div class="legis-card">
    <div class="legis-title"><b>Lei Complementar n¬∫ 1.111/2010</b></div>
    <button class="amostra-btn">Ver amostra</button>
  </div>
  <div class="legis-card" id="regimentoCard">
    <div class="legis-title"><b>Regimento Interno do Tribunal de Justi√ßa</b></div>
    <button class="amostra-btn" id="btnAmostraRegimento">Ver amostra</button>
  </div>
  <div class="legis-card">
    <div class="legis-title"><b>Normas da Corregedoria Geral da Justi√ßa</b></div>
    <button class="amostra-btn">Ver amostra</button>
  </div>
  <div class="legis-cta">
    Al√©m de <b>quest√µes IN√âDITAS</b> produzidas de forma totalmente estrat√©gica.<br>
    <button class="adquirir-btn">Quero a Legisla√ß√£o Completa</button>
  </div>
</section>

<!-- Modal de Amostra + Avalia√ß√£o -->
<div id="modalAmostra" class="modal-amostra hidden">
  <div class="modal-amostra-content">
    <button class="close-modal" id="closeModalAmostra">&times;</button>
    <h2 style="margin-bottom:.7em;font-family:'Outfit',sans-serif;font-weight:900;">Amostra do Regimento Interno</h2>
    <a href="https://drive.google.com/file/d/1Q0C2esYWSg0nhU5VvI_3qUODr1HjS24_/view?usp=sharing" target="_blank" class="amostra-btn" style="max-width:300px;margin-bottom:1.2em;">Abrir Amostra (PDF)</a>
    <div id="avaliacaoRegimento">
      <div style="font-size:1.06em;font-weight:700;margin-bottom:0.6em;">O que achou da amostra?</div>
      <div class="like-dislike-btns">
        <button class="like-btn" id="btnLike">&#128077;<span id="likeText"></span></button>
        <button class="dislike-btn" id="btnDislike">&#128078;<span id="dislikeText"></span></button>
      </div>
      <div id="avaliacaoMsg" style="font-size:1em;font-weight:600;margin-top:.85em;"></div>
    </div>
  </div>
</div>

<!-- CSS extra para modal e bot√µes -->
<style>
  .modal-amostra {
    position: fixed; z-index: 9999; inset: 0; background: rgba(50,32,90,0.32);
    display: flex; align-items: center; justify-content: center;
    transition: opacity .21s;
  }
  .modal-amostra.hidden { display: none !important; }
  .modal-amostra-content {
    background: #fff;
    border-radius: 1.6em;
    box-shadow: 0 16px 60px 0 #cab4f88c;
    padding: 2.2em 1.4em 2em 1.4em;
    min-width: 320px;
    max-width: 96vw;
    width: 340px;
    text-align: center;
    position: relative;
    animation: popIn .28s cubic-bezier(0.66,0,0.33,1.06);
  }
  @keyframes popIn {
    0%{ transform:scale(0.85); opacity:0;}
    100%{ transform:scale(1); opacity:1;}
  }
  .close-modal {
    position: absolute; right: 1.2em; top: 1.12em;
    background: none; border: none; color: #764bcb; font-size: 2.0em; font-weight: 700;
    cursor: pointer; opacity: 0.82; transition: opacity .18s;
  }
  .close-modal:hover { opacity:1; }
  .like-dislike-btns {
    display: flex; justify-content: center; gap: 1.7em; margin-top: 0.1em;
  }
  .like-btn, .dislike-btn {
    font-size: 2.1em;
    background: #f2ebfd;
    color: #7c46c5;
    border: none;
    border-radius: 50%;
    width: 56px; height: 56px;
    box-shadow: 0 2px 7px #cab4f825;
    cursor: pointer;
    outline: none;
    transition: background .17s, transform .18s;
    position: relative;
  }
  .like-btn.liked, .dislike-btn.disliked {
    background: linear-gradient(90deg, #bda6ff, #7c46c5 90%);
    color: #fff;
    font-weight: 900;
    transform: scale(1.11) rotate(-6deg);
  }
  .like-btn:active, .dislike-btn:active { transform: scale(0.98);}
  #avaliacaoMsg { min-height: 1.2em; }
</style>

<!-- JS para modal e avalia√ß√£o -->
<script>
document.addEventListener('DOMContentLoaded', function(){
  // Modal l√≥gica
  const modal = document.getElementById('modalAmostra');
  const btnModal = document.getElementById('btnAmostraRegimento');
  const closeModal = document.getElementById('closeModalAmostra');
  // Avalia√ß√£o
  const likeBtn = document.getElementById('btnLike');
  const dislikeBtn = document.getElementById('btnDislike');
  const avaliacaoMsg = document.getElementById('avaliacaoMsg');

  // Estado: salvar no localStorage
  const key = 'regimentoAvaliacao';
  function setAvaliacao(val) {
    localStorage.setItem(key, val);
    showAvaliacao();
  }
  function getAvaliacao() {
    return localStorage.getItem(key);
  }
  function showAvaliacao() {
    const val = getAvaliacao();
    if(val === 'like') {
      likeBtn.classList.add('liked');
      dislikeBtn.classList.remove('disliked');
      avaliacaoMsg.innerHTML = 'Obrigado pelo feedback! üéâ';
    } else if(val === 'dislike') {
      dislikeBtn.classList.add('disliked');
      likeBtn.classList.remove('liked');
      avaliacaoMsg.innerHTML = 'Vamos trabalhar para melhorar! üí°';
    } else {
      likeBtn.classList.remove('liked');
      dislikeBtn.classList.remove('disliked');
      avaliacaoMsg.innerHTML = '';
    }
  }
  if(btnModal) {
    btnModal.onclick = function(e){
      e.preventDefault();
      modal.classList.remove('hidden');
      showAvaliacao();
    }
  }
  closeModal.onclick = ()=>{ modal.classList.add('hidden'); };
  modal.onclick = function(e){ if(e.target===modal) modal.classList.add('hidden'); };

  likeBtn.onclick = function(){
    setAvaliacao('like');
  };
  dislikeBtn.onclick = function(){
    setAvaliacao('dislike');
  };
  showAvaliacao();

  // Outros bot√µes de amostra (mant√©m alert)
  document.querySelectorAll('.legis-card').forEach(function(card){
    const title = card.querySelector('.legis-title')?.innerText || '';
    const btn = card.querySelector('.amostra-btn');
    // S√≥ adiciona alerta para os que n√£o t√™m modal/link
    if(btn && !btn.hasAttribute('id') && !btn.hasAttribute('href')) {
      btn.onclick = ()=>alert('Em breve! Aqui vai aparecer a amostra desse material.');
    }
  });
  document.querySelector('.adquirir-btn').onclick = ()=>alert('Em breve! Compra direta pelo site ou WhatsApp.');
});
</script>
